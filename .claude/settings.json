{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "task",
        "hooks": [
          {
            "type": "command",
            "command": "echo '<system_reminder>TASK COMPLETED: You just completed a task. IMMEDIATELY: 1) Use Write tool to save the output, 2) Use LS to check existing files, 3) Read and update progress files to match reality, 4) Determine next action. NEVER create duplicate chapters. Check what exists first.</system_reminder>' >> .claude/context-injection.txt"
          }
        ]
      },
      {
        "matcher": "Write", 
        "hooks": [
          {
            "type": "command",
            "command": "echo '<system_reminder>FILE SAVED: File saved successfully. NEXT STEPS: 1) Check if this chapter is now complete (>3000 words), 2) Update chapter-status.json with actual word count, 3) Update plot-progress.json with current position, 4) Use LS to verify file structure, 5) Continue to next action. PREVENT DUPLICATION.</system_reminder>' >> .claude/context-injection.txt"
          },
          {
            "type": "command",
            "command": "if [ -x automation/quality-check.sh ]; then automation/quality-check.sh; fi"
          }
        ]
      },
      {
        "matcher": "LS",
        "hooks": [
          {
            "type": "command",
            "command": "echo '<system_reminder>FILES LISTED: File listing complete. Use this information to: 1) Identify highest existing chapter number, 2) Check for gaps or duplicates, 3) Update progress tracking to match reality, 4) Determine next chapter to work on. Never create files that already exist with substantial content.</system_reminder>' >> .claude/context-injection.txt"
          }
        ]
      },
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "echo '<system_reminder>CONTENT READ: Content read successfully. If this was a progress file or chapter file: 1) Note actual word counts and status, 2) Identify any discrepancies with tracking, 3) Plan corrections to align tracking with reality, 4) Never duplicate existing substantial content (>2000 words).</system_reminder>' >> .claude/context-injection.txt"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "if [ -x automation/system-health-check.sh ]; then automation/system-health-check.sh; fi"
          },
          {
            "type": "command",
            "command": "echo '<system_reminder>SESSION STARTED: You are the MASTER ORCHESTRATOR. FIRST ACTION: Read context injection for system status, synchronize state by using LS manuscript/chapters/, Read progress files, update tracking to match reality. Then continue novel generation. CRITICAL: Never duplicate existing chapters with substantial content.</system_reminder>' >> .claude/context-injection.txt"
          }
        ]
      }
    ]
  }
}